<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login do Aluno</title>
  <link rel="stylesheet" href="./styles/st-login-aluno.css">
  <link rel="icon" type="image/png" href="/logo.png">

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  
  <!-- Firebase Configuration -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDIy_7tZspi_QeI2Xk2K76ie_5ZarpfsFY",
      authDomain: "sisram2025.firebaseapp.com",
      projectId: "sisram2025",
      storageBucket: "sisram2025.firebasestorage.app",
      messagingSenderId: "731058106651",
      appId: "1:731058106651:web:fc6d4d4936bda7096c18fe",
      measurementId: "G-JZBE8RY29Y"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
  </script>

<style>
*{
  margin: 0;
  text-decoration: none;
  list-style: none;
  font-family: "Chakra Petch", sans-serif;
}

header{
    background: white;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
}

header a{
    color: #040f6b;;
    font-size: 1.5rem;
    margin: 80px;
}

body{
  background: #020520;
}

section h3{
  display: flex;
  justify-content: center;
  align-items: center;
}

body .conten{
  width: 50%;
  margin: 0 auto;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 80vh;
}

.login-form h3{
  font-size: 5rem;
  color: white;
}

.login-form button{
  margin-top: 50px;
  display: flex;
  justify-content: center;
  align-items: center;
  border: none;
  border-radius: 5rem;
  height: 60px;
  width: 500px;
  font-size: 2rem;
  margin-top: 10rem;
}

.btn-logar{
  display: flex;
  justify-content: center;
}

.google-btn {
  background: #e8eaed;
  color: #202124;
  font-weight: 600;
  box-shadow: 0 8px 24px rgba(0,0,0,0.18);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.google-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 28px rgba(0,0,0,0.22);
}

.google-btn img{
  width: 2.6rem;
  height: 2.6rem;
  margin-right: 1rem;
}

.btn-voltar{
  display: flex;
  justify-content: center;
}

.btn-voltar button{
  display: flex;
  justify-content: center;
  align-items: center;
  border: none;
  border-radius: 5rem;
  height: 60px;
  width: 500px;
  font-size: 2rem;
  margin-top: 15px;
}

footer {
  position: fixed;
  bottom: 0;
  width: 100%;
  font-size: 1.5rem;
  text-align: center;
  color: aliceblue;
  padding: 15px;
}

/* Media queries for responsiveness */
@media (max-width: 1024px) {
  body .conten {
    width: 70%;
  }
  
  .login-form button, .btn-voltar button {
    width: 400px;
  }
  
  .login-form h3 {
    font-size: 4rem;
  }
}

@media (max-width: 768px) {
  header a {
    margin: 20px;
    font-size: 1.2rem;
  }
  
  body .conten {
    width: 80%;
  }
  
  .login-form h3 {
    font-size: 3rem;
  }
  
  .login-form button, .btn-voltar button {
    width: 300px;
    height: 50px;
    font-size: 1.5rem;
  }
  
  footer {
    font-size: 1.2rem;
  }
}

@media (max-width: 480px) {
  header {
    height: auto;
    padding: 10px 0;
  }
  
  header div {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  
  header a {
    margin: 10px;
    font-size: 1rem;
  }
  
  body .conten {
    width: 90%;
    min-height: 70vh;
  }
  
  .login-form h3 {
    font-size: 2rem;
    text-align: center;
  }
  
  .login-form button, .btn-voltar button {
    width: 250px;
    height: 45px;
    font-size: 1.2rem;
    margin-top: 5rem;
  }
  
  .btn-voltar button {
    margin-top: 10px;
  }
  
  footer {
    position: relative;
    font-size: 0.9rem;
    padding: 10px;
  }
}
</style>

</head>
<body>
  <header>
    <div>
      <a href="#">Saiba Como Ingressar</a>
      <a href="#">Serviços</a>
      <a href="#">Contatos</a>
    </div>
  </header>

  <div class="conten">
    <section>
      <div class="login-form">
        <h3>Login do Aluno</h3>
        <!-- Google Sign-in button only -->
         <div class="btn-logar">
          <button onclick="signInWithGoogle()" class="google-btn">
            <img src="/images/google-logo.svg" alt="Google Icon"> Login com Google
          </button>
         </div>
         <div id="google-error" style="margin-top: 1rem; color: #f87171; font-size: 1rem; display: none;"></div>
      </div>
      <div class="btn-voltar">
        <button><a href="/">Voltar</a></button>
      </div>
    </section>
  
    <!-- Authentication Scripts -->
      <!-- Authentication Scripts -->
      <script>
        // Google Sign-in function
        function signInWithGoogle() {
          const provider = new firebase.auth.GoogleAuthProvider();
          
          // Optional: Force account selection even when one account is available
          provider.setCustomParameters({ prompt: 'select_account' });
          
          firebase.auth().signInWithPopup(provider)
            .then((result) => {
              // User signed in successfully
              const user = result.user;
              console.log("Usuário logado:", user.email);
              // Updated to use the full Railway URL
              window.location.href = "https://sisram2025-production.up.railway.app/enviardocs_aluno";
            })
            .catch((error) => {
              // Handle errors
              console.error("Erro no login:", error);
              const friendly = {
                'auth/popup-closed-by-user': 'Login cancelado. Tente novamente e mantenha o pop-up aberto.',
                'auth/popup-blocked': 'Seu navegador bloqueou o pop-up do Google. Libere pop-ups para continuar.',
                'auth/network-request-failed': 'Falha de rede. Verifique sua conexão e tente de novo.',
                'auth/unauthorized-domain': 'Domínio não autorizado no Firebase. Verifique a configuração do projeto.'
              };
              const msg = friendly[error.code] || ('Erro ao fazer login com Google: ' + error.message);
              const box = document.getElementById('google-error');
              if (box) {
                box.textContent = msg;
                box.style.display = 'block';
              }
              alert(msg);
            });
        }
      </script>
  </div>
  <footer>
    <p>2025 - <strong>ETE Ginásio Pernambucano.</strong> Todos os Direitos Reservados. Entrem em contato pelo <a href="https://www.instagram.com/garra_inc_technology/">@garra_inc_technology</a></p>
  </footer>
</body>
</html>
